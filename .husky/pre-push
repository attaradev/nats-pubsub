#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ§ª Running tests before push..."

# Run JavaScript tests
echo "ğŸ“¦ Running JavaScript tests..."
cd packages/javascript && npm test

if [ $? -ne 0 ]; then
  echo "âŒ JavaScript tests failed. Please fix the tests before pushing."
  exit 1
fi

# Run Ruby tests
echo "ğŸ’ Running Ruby tests..."
cd ../../packages/ruby && bundle exec rspec

if [ $? -ne 0 ]; then
  echo "âŒ Ruby tests failed. Please fix the tests before pushing."
  exit 1
fi

echo "âœ… All tests passed! Proceeding with push..."
